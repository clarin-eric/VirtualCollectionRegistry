<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:wicket="http://wicket.apache.org/">
    <head><title></title></head>
    <body>
        
        <wicket:panel>  
            <div class="col-xs-2" style="text-align: right;">
                <div wicket:id="label">label</div>
            </div>
            <div class="col-xs-10">
                <!-- Editor to add new reference -->
                <div class="col-xs-12">
                    <span>Examples:</span>
                </div>
                <!-- List Examples -->
                <div class="col-xs-12 my-2">
                    <div wicket:id="listExample">
                        <div wicket:id="pnl_example">example</div>
                    </div>
                </div>
                <!-- Input fields -->
                <div wicket:id="reference" class="col-xs-12 field-row">[URI]</div>
                <!--div wicket:id="reference_title" class="col-xs-12 field-row">[TITLE]</div-->
                <div class="col-md-12 col-xs-12">
                    <div class="col-xs-12"><i>Press &lt;enter&gt; to add this reference</i></div>
                </div>

                <div class="col-md-10 col-md-offset-2 col-sm-12 help_message" wicket:id="help_message">
                    <i class="fa fa-info-circle" aria-hidden="true" wicket:id="icon"></i>
                    <span wicket:id="message" class="help-message"></span>
                </div>

                <!-- Editor to improve a reference -->
                <div class="col-md-12 col-md-offset-0 col-sm-12" wicket:id="ref_editor_wrapper">
                    <div wicket:id="ref_editor"></div>
                </div>


                <div class="col-sm-12" wicket:id="filter">
                    <!-- reverse order because of pull-right -->
                    <span wicket:id="lbl_filter_postfix" class="pull-right"></span>
                    <select wicket:id="cb_filter" class="pull-right"></select>
                    <span wicket:id="lbl_filter_prefix" class="pull-right margin-right"></span>
                </div>

                <!-- The list of references -->
                <div class="col-md-12 col-md-offset-0 col-sm-12" wicket:id="ajaxwrapper" style="margin-top: 10px">
                    <div wicket:id="lbl_no_references" class="error-message"></div>
                    <div wicket:id="listview">
                        <div wicket:id="pnl_reference">label</div>
                    </div>
                </div>

                <div class="col-md-12 col-md-offset-0 col-sm-12 error-message" wicket:id="error_message"></div>
            </div>
            
            <!-- Modal -->
            <div id="myModal" wicket:id="references_modal"></div>
            
            <script>                
                /* Inject click handler into all buttons with a data-example-target attribute */                
                const items = document.querySelectorAll('button[data-example-target]');
                items.forEach((btn) => {
                    const valueElementId = btn.dataset["exampleValue"];
                    const targetElementId = btn.dataset["exampleTarget"] + " input";                        
                    btn.addEventListener("click", (e) => {                                              
                        const valueElements = document.querySelectorAll(valueElementId);
                        const targetElements = document.querySelectorAll(targetElementId);
                        if(valueElements.length <= 0) {
                            console.warn("No element found for value with id=", valueElementId);
                        } else if(targetElements.length <= 0) {
                            console.warn("No element found for target with id=", targetElementId);
                        } else {
                            const valueElement = valueElements[0];
                            const targetElement = targetElements[0];
                            targetElement.value = valueElement.value;
                            targetElement.focus();       
                        }
                    });
                });
            </script>
        </wicket:panel>       
        
    </body>
</html>